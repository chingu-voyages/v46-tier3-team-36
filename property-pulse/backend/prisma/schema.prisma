generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                            Int            @id @default(autoincrement())
  name                          String
  password                      String?
  email                         String         @unique
  emailVerified                 DateTime?
  image                         String?
  role                          Role           @default(tenant)
  issues                        Issue[]
  notifications                 Notification[]
}

model Session {
  sid    String   @id @db.VarChar
  sess   Json     @db.Json
  expire DateTime @db.Timestamp(6)

  @@index([expire], map: "IDX_session_expire")
  @@map(name: "session")
}

enum Role {
  manager
  tenant
}

model Issue {
  id              Int              @id @default(autoincrement())
  status          IssueStatus      @default(open)
  type            IssueType
  tenant          User             @relation(fields: [tenantId], references: [id])
  tenantId        Int
  createdAt       DateTime         @default(now()) @db.Timestamptz()
  updatedAt       DateTime         @updatedAt
  title           String
  description     String
}

enum IssueStatus {
  open
  closed
}

enum IssueType {
  maintenanceRequest
  complaint
  inquiry
}

model Notification {
  id              Int              @id @default(autoincrement())
  user            User             @relation(fields: [userId], references: [id])
  userId          Int
  createdAt       DateTime         @default(now()) @db.Timestamptz()
  title           String
  content         String
  read            Boolean          @default(false)
  isNew           Boolean          @default(true)
}

// model Property {

// }

// model Unit {

// }



// model Message {

// }

// model Bill {

// }